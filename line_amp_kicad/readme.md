# Line Amplifier

## Motivation

This is part of a larger project to design a generalized guitar stomp box.
The end to end signal chain will consist of this line amplifier, an ADC for sampling the signal, a microcontroller for doing DSP, and a DAC to produce the output signal.

This line amplifier takes the anticipated 300mVpp, 0V offset signal from the guitar and amplifies / offsets it to around 2.8Vpp around DC offset, suitable for input into a 3.3V single ended ADC.  It also has a single pole high pass filter, Fc of 100Hz, and a single pole low pass filter, Fc of 20kHz.  

## How to Use

The project features a simulation, python script, and KiCad Files.  The simulation is an LTSpice simulation with generic components, that will be edited to simulate amplifier non-idealities - input offset voltage, input bias current, etc.  The simulation is parameterized, and component values shouldn't be edited directly in the simulation.  To edit the component values, use the line_amp_param.py python script. This script has a dictionary containing all of the component values, and execution of this script will create a "line_amp.txt" text file which LTspice will read on execution.

## File Description
**line_amp.asc** - simulation of amplifier \
**line_amp_param.py** - python script used to generate simulation parameters.\ 
**line_amp.txt** - text file generated by line_amp_param.py on execution. This file is read by LTspice to parameterize the simulation at runtime. \  

## Next Steps
1. Add op amp nonidealities
2. Record audio files of all open guitar strings, and highest / lowest notes.
3. Turn these recordings into .PWL files which can be used as input waveforms for LTspice.
4. Look at frequency domain output waveform when subject to these time domain inputs. 

## Future Developments
1. It would be great to define a data structure for components.  I'm currently thinking classes, but I haven't traded the options yet.  Each data structure would hold information specific to the component, ideally information that fully specifies the component but that is consistent amongst all datasheets.  Obviously, this would only really work for generics (amplifiers, passives, switching devices like FETs and BJTs, etc).  Then, for a given simulation, the simulation components would be specified from this class library, and all simulations could be represented by generic components, except perhaps for fancier integrated circuits. Benefits of this approach would be that, instead of bespoke circuits, each circuit would be generalized. Component swaps would be easier to make and understand the ramifications for, and we'd be able to better evaluate if a cheap component would suffice.  It might even be possible to develop test / evaluation criteria for circuits so that there's less dependency on individuals to evaluate whether a circuit is operating correctly or not.   
